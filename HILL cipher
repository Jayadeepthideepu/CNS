#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX 10

void encrypt(char plaintext[], int key[MAX][MAX], int n) {
    int i, j;
    int len = strlen(plaintext);
    char ciphertext[len + 1];
    int k = 0;

    for (i = 0; i < len; i += n) {
        for (j = 0; j < n; j++) {
            if (i + j < len) {
                ciphertext[k++] = plaintext[i + j];
            } else {
                ciphertext[k++] = 'X'; // Padding with 'X'
            }
        }
    }
    ciphertext[k] = '\0';

    for (i = 0; i < len; i += n) {
        for (j = 0; j < n; j++) {
            if (i + j < len) {
                plaintext[i + j] = 0;
                for (int l = 0; l < n; l++) {
                    plaintext[i + j] += key[j][l] * ciphertext[i + l];
                }
                plaintext[i + j] = (plaintext[i + j] % 26) + 'A';
            }
        }
    }
}

int main() {
    char plaintext[MAX];
    int key[MAX][MAX], n, i, j;

    printf("Enter plaintext: ");
    scanf("%s", plaintext);
    printf("Enter key size (n x n): ");
    scanf("%d", &n);
    printf("Enter key matrix (%d x %d):\n", n, n);
    for (i = 0; i < n; i++) {
        for (j = 0; j < n; j++) {
            scanf("%d", &key[i][j]);
        }
    }

    encrypt(plaintext, key, n);
    printf("Ciphertext: %s\n", plaintext);

    return 0;
}
